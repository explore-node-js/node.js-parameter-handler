machine:
    node:
        version: 8.11

dependencies:
    pre:
        - echo "//registry.npmjs.org/:_authToken=$NPM_TOKEN" >> ~/.npmrc
    cache_directories:
        - ~/.npm/

test:
    pre:
        - npm install -g codecov
    override:
        - npm test -- --coverage
        - codecov

deployment:
    production:
        branch: master
        commands:
            - npm publish
